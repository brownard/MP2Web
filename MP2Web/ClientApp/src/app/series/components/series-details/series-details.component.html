<div *ngIf="series$ | async as series; else loading" class="container p-0">

  <div class="media-details-container">

    <div class="row">
      <div class="col-4 col-lg-auto">
        <img [src]="artworkService.getCoverUrl(5, series.Id, 0)" class="img-fluid w-100" />
      </div>
      <div class="col metadata">
        <h6 class="media-title">{{series.Title}}</h6>
        <app-star-rating [rating]="series.Rating | number: '1.0-0'" class="yellow-star"></app-star-rating>
        <span class="text-truncate ml-2">{{series.Rating | number: '1.0-0'}}/10</span>
        <div class="text-truncate">{{series.Year}}</div>
        <div class="text-truncate">{{series.EpisodeCount}} episodes</div>
      </div>
    </div>
    <div class="row media-summary">
      <p>{{series.Summary}}</p>
    </div>

    <div *ngIf="selectedEpisode" class="row">
      <app-video-player [mediaItem]="selectedEpisode" style="width: 100%;"></app-video-player>
    </div>

    <div *ngFor="let season of seasons$ | async">
      <hr class="mt-1" />
      <app-season-details [season]="season" (episodeSelected)="onEpisodeSelected($event)"></app-season-details>
    </div>

    <div class="row">
      <table class="table metadata">
        <tbody>
          <tr>
            <th scope="row">Genres</th>
            <td>{{series.Genres.join(', ')}}</td>
          </tr>
          <tr>
            <th scope="row">Actors</th>
            <td>{{mapProperty(series.Actors, 'Title').join(', ')}}</td>
          </tr>
          <tr>
            <th scope="row">Id</th>
            <td>{{series.Id}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="text-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
</ng-template>
